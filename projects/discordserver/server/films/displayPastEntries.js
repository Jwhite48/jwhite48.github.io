module.exports={getHTML:function(){const e=require("mongodb").MongoClient,t=require("mustache");var n=require("fs");const r=new e("mongodb+srv://"+"{{MONGO USERNAME GOES HERE}}"+":"+"{{MONGO PASSWORD GOES HERE}}"+"@cluster.cjylvb8.mongodb.net/"+"Films"+"?retryWrites=true&w=majority",{useUnifiedTopology:!0});return r.connect().then(function(e){return e.db().listCollections().toArray().then(function(e){var t=[];for(const n of e)/^[0-9]{4,4}$/.test(n.name)&&t.push(n.name);if(0===t.length)throw r.close(),"NOTHING IN THE DATABASE";return t})}).then(async function(e){var t=e.length,n={};for(const o of e)if(await r.db().collection(o).find().sort({order:1}).toArray().then(function(e){t--,n[`${o.substring(o.lastIndexOf("-")+1)}`]=e}),0===t)return await r.close(),n}).then(function(e){var r="",o=[],s=0,i=n.readFileSync("./films/generate-past-entries.html","utf-8");for(const n in e)o.push({year:n}),r+=t.render(i,{scope:e[n],year:n,plusOneOrder:function(){return++s},date:function(){return this.release_date.substring(0,this.release_date.indexOf("-")).trim()}});return i=n.readFileSync("./films/master-past-entries.html","utf-8"),t.render(i,{html:r,years:o})})}};